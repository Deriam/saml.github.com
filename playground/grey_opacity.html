<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Grey Image/Opacity Change</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
var ImageLoader = function(config) {
    if (typeof config === 'undefined') {
        config = {};
    }

    var me = {};

    var img = new Image();
    var wrap = config.wrap || jQuery('#wrapper');
    var image = jQuery(img);
    
    var opacity = config.opacity || 0.5;
    var background = config.background || '#000';

    var jq_opacity = jQuery('#opacity');
    var jq_background = jQuery('#background');

    jq_opacity.change(function() {
        var x = parseFloat(jQuery(this).val());
        opacity = isNaN(x) ? opacity : x;
    });

    jq_background.change(function() {
        background = jQuery(this).val();
        wrap.css("background", background);
    });

    wrap.hover(function() {
        image.fadeTo('fast', 1.0);
    }, function() {
        image.fadeTo('fast', opacity);
    });

    image.load(function() {
        wrap.width(img.width);
        wrap.height(img.height);

        jq_background.change();
        jq_opacity.change();
        image.fadeTo(0, opacity);
    });

    me.reload = function(url) {
        img.src = url;
    };

    wrap.append(img);

    return me;
};

jQuery(document).ready(function() {
    var loader = ImageLoader();
    loader.reload(window.location.hash.substr(1));
    jQuery(window).bind('hashchange', function() {
        loader.reload(window.location.hash.substr(1));
    });
});
</script>
</head>
<body>
<h1>copy and paste image url as hash</h1>
<div>for example, <a href="/playground/grey_opacity.html#https://encrypted-tbn1.google.com/images?q=tbn:ANd9GcRjkXBBH2efPWFp-krMbaMo2D4OiUCgBjh_tt4i6xGJoA6xTpEn">http://saml.github.com/playground/grey_opacity.html#https://encrypted-tbn1.google.com/images?q=tbn:ANd9GcRjkXBBH2efPWFp-krMbaMo2D4OiUCgBjh_tt4i6xGJoA6xTpEn</a></div>

<br/>

<div id="wrapper"></div>

<br/>

<form onsubmit="return false;">
<label>opacity of image</label>
<input id="opacity" name="opacity" value="0.5"/><br/>
<label>background color of image</label>
<input id="background" name="background" value="#000"/>
</form>
</body>
</html>
